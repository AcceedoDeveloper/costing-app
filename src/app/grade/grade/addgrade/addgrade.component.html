<div *ngFor="let group of dropdowns; let i = index" style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
  
  <!-- Type Dropdown -->
  <mat-form-field appearance="outline" style="width: 150px;">
    <mat-label>Type</mat-label>
    <mat-select [(ngModel)]="group.selectedType" (selectionChange)="onTypeChange(i, $event.value)">
      <mat-option *ngFor="let type of materialTypes" [value]="type">
        {{ type }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <!-- Name Dropdown -->
  <mat-form-field appearance="outline" style="width: 150px;">
    <mat-label>Name</mat-label>
    <mat-select [(ngModel)]="group.selectedName" [disabled]="!group.selectedType">
      <mat-option *ngFor="let name of group.filteredNames" [value]="name.name">
        {{ name.name }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <!-- Add Button (only on the last row and if it's filled) -->
  <button
    mat-icon-button
    color="primary"
    (click)="addDropdown()"
    *ngIf="i === dropdowns.length - 1 && group.selectedType && group.selectedName">
    <mat-icon>add</mat-icon>
  </button>
</div>
