<!-- Casting Inputs -->
<div class="grid-container">


  

<div class="grid-section">
  <h2>Casting Inputs</h2>
  <mat-card class="casting-card" *ngFor="let item of castingData">
    <!-- Casting Weight -->
    <div class="casting-row">
      <div class="label">Casting Weight</div>
      <div class="value">
        <ng-container *ngIf="!editMode.casting[item._id]?.CastingWeight; else editCastingWeight">
          {{ item.CastingWeight }}
          <button mat-icon-button (click)="toggleEditMode('casting', item._id, 'CastingWeight')">
            <mat-icon>edit</mat-icon>
          </button>
        </ng-container>
        <ng-template #editCastingWeight>
          <input [(ngModel)]="editableData.casting[item._id].CastingWeight" type="number" />
          <button mat-icon-button (click)="saveField('casting', item, 'CastingWeight')">
            <mat-icon>save</mat-icon>
          </button>
          <button mat-icon-button (click)="cancelEdit('casting', item._id, 'CastingWeight')">
            <mat-icon>cancel</mat-icon>
          </button>
        </ng-template>
      </div>
    </div>

    <!-- Cavities -->
    <div class="casting-row">
      <div class="label">Cavities</div>
      <div class="value">
        <ng-container *ngIf="!editMode.casting[item._id]?.Cavities; else editCavities">
          {{ item.Cavities }}
          <button mat-icon-button (click)="toggleEditMode('casting', item._id, 'Cavities')">
            <mat-icon>edit</mat-icon>
          </button>
        </ng-container>
        <ng-template #editCavities>
          <input [(ngModel)]="editableData.casting[item._id].Cavities" type="number" />
          <button mat-icon-button (click)="saveField('casting', item, 'Cavities')">
            <mat-icon>save</mat-icon>
          </button>
          <button mat-icon-button (click)="cancelEdit('casting', item._id, 'Cavities')">
            <mat-icon>cancel</mat-icon>
          </button>
        </ng-template>
      </div>
    </div>

    <!-- Pouring Weight -->
    <div class="casting-row">
      <div class="label">Pouring Weight</div>
      <div class="value">
        <ng-container *ngIf="!editMode.casting[item._id]?.PouringWeight; else editPouringWeight">
          {{ item.PouringWeight }}
          <button mat-icon-button (click)="toggleEditMode('casting', item._id, 'PouringWeight')">
            <mat-icon>edit</mat-icon>
          </button>
        </ng-container>
        <ng-template #editPouringWeight>
          <input [(ngModel)]="editableData.casting[item._id].PouringWeight" type="number" />
          <button mat-icon-button (click)="saveField('casting', item, 'PouringWeight')">
            <mat-icon>save</mat-icon>
          </button>
          <button mat-icon-button (click)="cancelEdit('casting', item._id, 'PouringWeight')">
            <mat-icon>cancel</mat-icon>
          </button>
        </ng-template>
      </div>
    </div>

    <!-- Weight Per Kg -->
    <div class="casting-row">
      <div class="label">Weight Per Kg</div>
      <div class="value">
        <ng-container *ngIf="!editMode.casting[item._id]?.CastingWeightPerKg; else editCastingWeightPerKg">
          {{ item.CastingWeightPerKg }}
          <button mat-icon-button (click)="toggleEditMode('casting', item._id, 'CastingWeightPerKg')">
            <mat-icon>edit</mat-icon>
          </button>
        </ng-container>
        <ng-template #editCastingWeightPerKg>
          <input [(ngModel)]="editableData.casting[item._id].CastingWeightPerKg" type="number" />
          <button mat-icon-button (click)="saveField('casting', item, 'CastingWeightPerKg')">
            <mat-icon>save</mat-icon>
          </button>
          <button mat-icon-button (click)="cancelEdit('casting', item._id, 'CastingWeightPerKg')">
            <mat-icon>cancel</mat-icon>
          </button>
        </ng-template>
      </div>
    </div>

    <!-- Yield -->
    <div class="casting-row">
      <div class="label">Yield</div>
      <div class="value">
        <ng-container *ngIf="!editMode.casting[item._id]?.Yeild; else editYeild">
          {{ item.Yeild }}
          <button mat-icon-button (click)="toggleEditMode('casting', item._id, 'Yeild')">
            <mat-icon>edit</mat-icon>
          </button>
        </ng-container>
        <ng-template #editYeild>
          <input [(ngModel)]="editableData.casting[item._id].Yeild" type="number" />
          <button mat-icon-button (click)="saveField('casting', item, 'Yeild')">
            <mat-icon>save</mat-icon>
          </button>
          <button mat-icon-button (click)="cancelEdit('casting', item._id, 'Yeild')">
            <mat-icon>cancel</mat-icon>
          </button>
        </ng-template>
      </div>
    </div>

    <!-- Material Returned -->
    <div class="casting-row">
      <div class="label">Material Returned</div>
      <div class="value">
        <ng-container *ngIf="!editMode.casting[item._id]?.MaterialReturned; else editMaterialReturned">
          {{ item.MaterialReturned }}
          <button mat-icon-button (click)="toggleEditMode('casting', item._id, 'MaterialReturned')">
            <mat-icon>edit</mat-icon>
          </button>
        </ng-container>
        <ng-template #editMaterialReturned>
          <input [(ngModel)]="editableData.casting[item._id].MaterialReturned" type="number" />
          <button mat-icon-button (click)="saveField('casting', item, 'MaterialReturned')">
            <mat-icon>save</mat-icon>
          </button>
          <button mat-icon-button (click)="cancelEdit('casting', item._id, 'MaterialReturned')">
            <mat-icon>cancel</mat-icon>
          </button>
        </ng-template>
      </div>
    </div>
  </mat-card>
</div>

<!-- Core Inputs -->
<div class="grid-section">
  <h2>Core Inputs</h2>
  <mat-card class="core-card" *ngFor="let item of coreData">
    <!-- Core Sand -->
    <div class="core-row">
      <div class="label">Core Sand</div>
      <div class="value">
        <ng-container *ngIf="!editMode.core[item._id]?.CoreSand; else editCoreSand">
          {{ item.CoreSand }}
          <button mat-icon-button (click)="toggleEditMode('core', item._id, 'CoreSand')">
            <mat-icon>edit</mat-icon>
          </button>
        </ng-container>
        <ng-template #editCoreSand>
          <input [(ngModel)]="editableData.core[item._id].CoreSand" type="number" />
          <button mat-icon-button (click)="saveField('core', item, 'CoreSand')">
            <mat-icon>save</mat-icon>
          </button>
          <button mat-icon-button (click)="cancelEdit('core', item._id, 'CoreSand')">
            <mat-icon>cancel</mat-icon>
          </button>
        </ng-template>
      </div>
    </div>

    <!-- Core Weight -->
    <div class="core-row">
      <div class="label">Core Weight</div>
      <div class="value">
        <ng-container *ngIf="!editMode.core[item._id]?.CoreWeight; else editCoreWeight">
          {{ item.CoreWeight }}
          <button mat-icon-button (click)="toggleEditMode('core', item._id, 'CoreWeight')">
            <mat-icon>edit</mat-icon>
          </button>
        </ng-container>
        <ng-template #editCoreWeight>
          <input [(ngModel)]="editableData.core[item._id].CoreWeight" type="number" />
          <button mat-icon-button (click)="saveField('core', item, 'CoreWeight')">
            <mat-icon>save</mat-icon>
          </button>
          <button mat-icon-button (click)="cancelEdit('core', item._id, 'CoreWeight')">
            <mat-icon>cancel</mat-icon>
          </button>
        </ng-template>
      </div>
    </div>

    <!-- Shooting Per Shift -->
    <div class="core-row">
      <div class="label">Shooting Per Shift</div>
      <div class="value">
        <ng-container *ngIf="!editMode.core[item._id]?.ShootingPerShift; else editShootingPerShift">
          {{ item.ShootingPerShift }}
          <button mat-icon-button (click)="toggleEditMode('core', item._id, 'ShootingPerShift')">
            <mat-icon>edit</mat-icon>
          </button>
        </ng-container>
        <ng-template #editShootingPerShift>
          <input [(ngModel)]="editableData.core[item._id].ShootingPerShift" type="number" />
          <button mat-icon-button (click)="saveField('core', item, 'ShootingPerShift')">
            <mat-icon>save</mat-icon>
          </button>
          <button mat-icon-button (click)="cancelEdit('core', item._id, 'ShootingPerShift')">
            <mat-icon>cancel</mat-icon>
          </button>
        </ng-template>
      </div>
    </div>

    <!-- Cores Per Mould -->
    <div class="core-row">
      <div class="label">Cores Per Mould</div>
      <div class="value">
        <ng-container *ngIf="!editMode.core[item._id]?.coresPerMould; else editCoresPerMould">
          {{ item.coresPerMould }}
          <button mat-icon-button (click)="toggleEditMode('core', item._id, 'coresPerMould')">
            <mat-icon>edit</mat-icon>
          </button>
        </ng-container>
        <ng-template #editCoresPerMould>
          <input [(ngModel)]="editableData.core[item._id].coresPerMould" type="number" />
          <button mat-icon-button (click)="saveField('core', item, 'coresPerMould')">
            <mat-icon>save</mat-icon>
          </button>
          <button mat-icon-button (click)="cancelEdit('core', item._id, 'coresPerMould')">
            <mat-icon>cancel</mat-icon>
          </button>
        </ng-template>
      </div>
    </div>
  </mat-card>
</div>

<!-- Moulding Inputs -->
<div class="grid-section">
  <h2>Moulding Inputs</h2>
  <mat-card class="moulding-card" *ngFor="let item of mouldingData">
    <!-- Bake Moulding -->
    <div class="moulding-row">
      <div class="label">Bake Moulding</div>
      <div class="value">
        <ng-container *ngIf="!editMode.moulding[item._id]?.BakeMoulding; else editBakeMoulding">
          {{ item.BakeMoulding }}
          <button mat-icon-button (click)="toggleEditMode('moulding', item._id, 'BakeMoulding')">
            <mat-icon>edit</mat-icon>
          </button>
        </ng-container>
        <ng-template #editBakeMoulding>
          <input [(ngModel)]="editableData.moulding[item._id].BakeMoulding" type="number" />
          <button mat-icon-button (click)="saveField('moulding', item, 'BakeMoulding')">
            <mat-icon>save</mat-icon>
          </button>
          <button mat-icon-button (click)="cancelEdit('moulding', item._id, 'BakeMoulding')">
            <mat-icon>cancel</mat-icon>
          </button>
        </ng-template>
      </div>
    </div>

    <!-- Moulding Weight -->
    <div class="moulding-row">
      <div class="label">Moulding Weight</div>
      <div class="value">
        <ng-container *ngIf="!editMode.moulding[item._id]?.MouldingWeight; else editMouldingWeight">
          {{ item.MouldingWeight }}
          <button mat-icon-button (click)="toggleEditMode('moulding', item._id, 'MouldingWeight')">
            <mat-icon>edit</mat-icon>
          </button>
        </ng-container>
        <ng-template #editMouldingWeight>
          <input [(ngModel)]="editableData.moulding[item._id].MouldingWeight" type="number" />
          <button mat-icon-button (click)="saveField('moulding', item, 'MouldingWeight')">
            <mat-icon>save</mat-icon>
          </button>
          <button mat-icon-button (click)="cancelEdit('moulding', item._id, 'MouldingWeight')">
            <mat-icon>cancel</mat-icon>
          </button>
        </ng-template>
      </div>
    </div>

    <!-- Moulds Per Heat -->
    <div class="moulding-row">
      <div class="label">Moulds Per Heat</div>
      <div class="value">
        <ng-container *ngIf="!editMode.moulding[item._id]?.MouldsPerHeat; else editMouldsPerHeat">
          {{ item.MouldsPerHeat }}
          <button mat-icon-button (click)="toggleEditMode('moulding', item._id, 'MouldsPerHeat')">
            <mat-icon>edit</mat-icon>
          </button>
        </ng-container>
        <ng-template #editMouldsPerHeat>
          <input [(ngModel)]="editableData.moulding[item._id].MouldsPerHeat" type="number" />
          <button mat-icon-button (click)="saveField('moulding', item, 'MouldsPerHeat')">
            <mat-icon>save</mat-icon>
          </button>
          <button mat-icon-button (click)="cancelEdit('moulding', item._id, 'MouldsPerHeat')">
            <mat-icon>cancel</mat-icon>
          </button>
        </ng-template>
      </div>
    </div>
  </mat-card>
</div>

</div>
